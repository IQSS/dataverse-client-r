<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download Dataverse file as a raw binary — get_file • dataverse</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download Dataverse file as a raw binary — get_file"><meta property="og:description" content="Download Dataverse File(s). get_file_*
functions return a raw binary file, which cannot be readily analyzed in R.
To use the objects as dataframes, see the get_dataframe_* functions at
?get_dataframe instead."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dataverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A-introduction.html">1. Introduction to Dataverse</a>
    </li>
    <li>
      <a href="../articles/B-search.html">2. Data Search and Discovery</a>
    </li>
    <li>
      <a href="../articles/C-download.html">3. Data Download</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/iqss/dataverse-client-r/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download Dataverse file as a raw binary</h1>
    <small class="dont-index">Source: <a href="https://github.com/iqss/dataverse-client-r/blob/HEAD/R/get_file.R" class="external-link"><code>R/get_file.R</code></a>, <a href="https://github.com/iqss/dataverse-client-r/blob/HEAD/R/get_file_by_id.R" class="external-link"><code>R/get_file_by_id.R</code></a></small>
    <div class="hidden name"><code>files.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Download Dataverse File(s). <code>get_file_*</code>
functions return a raw binary file, which cannot be readily analyzed in R.
To use the objects as dataframes, see the <code>get_dataframe_*</code> functions at
<code>?get_dataframe</code> instead.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">get_file</span><span class="op">(</span>
  <span class="va">file</span>,
  dataset <span class="op">=</span> <span class="cn">NULL</span>,
  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"original"</span>, <span class="st">"bundle"</span><span class="op">)</span>,
  vars <span class="op">=</span> <span class="cn">NULL</span>,
  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_KEY"</span><span class="op">)</span>,
  server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_SERVER"</span><span class="op">)</span>,
  original <span class="op">=</span> <span class="cn">TRUE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">get_file_by_name</span><span class="op">(</span>
  <span class="va">filename</span>,
  <span class="va">dataset</span>,
  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"original"</span>, <span class="st">"bundle"</span><span class="op">)</span>,
  vars <span class="op">=</span> <span class="cn">NULL</span>,
  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_KEY"</span><span class="op">)</span>,
  server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_SERVER"</span><span class="op">)</span>,
  original <span class="op">=</span> <span class="cn">TRUE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">get_file_by_id</span><span class="op">(</span>
  <span class="va">fileid</span>,
  dataset <span class="op">=</span> <span class="cn">NULL</span>,
  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"original"</span>, <span class="st">"bundle"</span><span class="op">)</span>,
  vars <span class="op">=</span> <span class="cn">NULL</span>,
  original <span class="op">=</span> <span class="cn">TRUE</span>,
  progress <span class="op">=</span> <span class="cn">FALSE</span>,
  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_KEY"</span><span class="op">)</span>,
  server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_SERVER"</span><span class="op">)</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">get_file_by_doi</span><span class="op">(</span>
  <span class="va">filedoi</span>,
  dataset <span class="op">=</span> <span class="cn">NULL</span>,
  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"original"</span>, <span class="st">"bundle"</span><span class="op">)</span>,
  vars <span class="op">=</span> <span class="cn">NULL</span>,
  original <span class="op">=</span> <span class="cn">TRUE</span>,
  key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_KEY"</span><span class="op">)</span>,
  server <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_SERVER"</span><span class="op">)</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>file</dt>
<dd><p>An integer specifying a file identifier; or a vector of integers
specifying file identifiers; or, if used with the prefix <code>"doi:"</code>, a
character with the file-specific DOI; or, if used without the prefix, a
filename accompanied by a dataset DOI in the <code>dataset</code> argument, or an object of
class “dataverse_file” as returned by <code><a href="get_dataset.html">dataset_files</a></code>.
Can be a vector for multiple files.</p></dd>
<dt>dataset</dt>
<dd><p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
“dataverse_dataset” obtained by <code><a href="get_dataverse.html">dataverse_contents()</a></code>.</p></dd>
<dt>format</dt>
<dd><p>A character string specifying a file format for download.
by default, this is “original” (the original file format). If <code>NULL</code>,
no query is added, so ingested files are returned in their ingested TSV form.
For tabular datasets, the option “bundle” downloads the bundle
of the original and archival versions, as well as the documentation.
See <a href="https://guides.dataverse.org/en/latest/api/dataaccess.html" class="external-link">https://guides.dataverse.org/en/latest/api/dataaccess.html</a> for details.</p></dd>
<dt>vars</dt>
<dd><p>A character vector specifying one or more variable names, used to
extract a subset of the data.</p></dd>
<dt>key</dt>
<dd><p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p></dd>
<dt>server</dt>
<dd><p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code>DATAVERSE_SERVER = "dataverse.harvard.edu</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p></dd>
<dt>original</dt>
<dd><p>A logical, defaulting to TRUE. If a ingested (.tab) version is
available, download the original version instead of the ingested? If there was
no ingested version, is set to NA. Note in <code>get_dataframe_*</code>,
<code>original</code> is set to FALSE by default. Either can be changed.</p></dd>
<dt>...</dt>
<dd><p>Additional arguments passed to an HTTP request function, such as
<code><a href="https://httr.r-lib.org/reference/GET.html" class="external-link">GET</a></code>, <code><a href="https://httr.r-lib.org/reference/POST.html" class="external-link">POST</a></code>, or
<code><a href="https://httr.r-lib.org/reference/DELETE.html" class="external-link">DELETE</a></code>.</p></dd>
<dt>filename</dt>
<dd><p>Filename of the dataset, with file extension as shown in Dataverse
(for example, if nlsw88.dta was the original but is displayed as the ingested
nlsw88.tab, use the ingested version.)</p></dd>
<dt>fileid</dt>
<dd><p>A numeric ID internally used for <code>get_file_by_id</code>. Can be a vector for multiple files.</p></dd>
<dt>progress</dt>
<dd><p>Whether to show a progress bar of the download. Defaults to <code>FALSE</code>.</p></dd>
<dt>filedoi</dt>
<dd><p>A DOI for a single file (not the entire dataset), of the form
<code>"10.70122/FK2/PPIAXE/MHDB0O"</code> or <code>"doi:10.70122/FK2/PPIAXE/MHDB0O"</code>.
Can be a vector for multiple files.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>get_file</code> returns a raw vector (or list of raw vectors,
if <code>length(file) &gt; 1</code>), which can be saved locally with the <code>writeBin</code>function.  To load datasets into the R environment dataframe, see
<a href="get_dataframe.html">get_dataframe_by_name</a>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function provides access to data files from a Dataverse entry.
<code>get_file</code> is a general wrapper,
and can take either dataverse objects, file IDs, or a filename and dataverse.
Internally, all functions download each file by <code>get_file_by_id</code>.
<code>get_file_by_name</code> is a shorthand for running <code>get_file</code> by
specifying a file name (<code>filename</code>) and dataset (<code>dataset</code>).
<code>get_file_by_doi</code> obtains a file by its file DOI, bypassing the
<code>dataset</code> argument.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>To load the objects as datasets <a href="get_dataframe.html">get_dataframe_by_name</a>.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># 1. Using filename and dataverse</span></span>
<span class="r-in"><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu">get_file_by_name</span><span class="op">(</span></span>
<span class="r-in">  filename <span class="op">=</span> <span class="st">"nlsw88.tab"</span>,</span>
<span class="r-in">  dataset  <span class="op">=</span> <span class="st">"10.70122/FK2/PPIAXE"</span>,</span>
<span class="r-in">  server   <span class="op">=</span> <span class="st">"demo.dataverse.org"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># 2. Using file DOI</span></span>
<span class="r-in"><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu">get_file_by_doi</span><span class="op">(</span></span>
<span class="r-in">  filedoi  <span class="op">=</span> <span class="st">"10.70122/FK2/PPIAXE/MHDB0O"</span>,</span>
<span class="r-in">  server   <span class="op">=</span> <span class="st">"demo.dataverse.org"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># 3. Two-steps: Find ID from get_dataset</span></span>
<span class="r-in"><span class="va">d3</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_dataset.html">get_dataset</a></span><span class="op">(</span><span class="st">"doi:10.70122/FK2/PPIAXE"</span>, server <span class="op">=</span> <span class="st">"demo.dataverse.org"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">f3</span> <span class="op">&lt;-</span> <span class="fu">get_file</span><span class="op">(</span><span class="va">d3</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, server <span class="op">=</span> <span class="st">"demo.dataverse.org"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># 4. Retrieve multiple raw data in list</span></span>
<span class="r-in"><span class="va">f4_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_dataset.html">get_dataset</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="st">"doi:10.70122/FK2/PPIAXE"</span>,</span>
<span class="r-in">  server <span class="op">=</span> <span class="st">"demo.dataverse.org"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">f4</span> <span class="op">&lt;-</span> <span class="fu">get_file</span><span class="op">(</span><span class="va">f4_meta</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="va">id</span>, server <span class="op">=</span> <span class="st">"demo.dataverse.org"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">f4</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">f4_meta</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="va">label</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Write binary files. To load into R environment, use get_dataframe_by_name()</span></span>
<span class="r-in"><span class="co"># The appropriate file extension needs to be assigned by the user.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">writeBin</a></span><span class="op">(</span><span class="va">f1</span>, <span class="st">"nlsw88.dta"</span><span class="op">)</span> <span class="co"># .tab extension but save as dta</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">writeBin</a></span><span class="op">(</span><span class="va">f4</span><span class="op">[[</span><span class="st">"nlsw88_rds-export.rds"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"nlsw88.rds"</span><span class="op">)</span> <span class="co"># originally a rds file</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/readBin.html" class="external-link">writeBin</a></span><span class="op">(</span><span class="va">f4</span><span class="op">[[</span><span class="st">"nlsw88.tab"</span><span class="op">]</span><span class="op">]</span>, <span class="st">"nlsw88.dta"</span><span class="op">)</span> <span class="co"># originally a dta file</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Shiro Kuriwaki, Will Beasley, Thomas J. Leeper, Philip Durbin, Sebastian Karcher.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

