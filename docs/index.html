<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Client for Dataverse 4+ Repositories • dataverse</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Client for Dataverse 4+ Repositories">
<meta property="og:description" content="Provides access to Dataverse APIs &lt;https://dataverse.org/&gt; (versions 4-5),
    enabling data search, retrieval, and deposit. For Dataverse versions &lt;= 3.0,
    use the archived dvn package &lt;https://cran.r-project.org/package=dvn&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dataverse</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/A-introduction.html">Introduction to Dataverse</a>
    </li>
    <li>
      <a href="articles/B-search.html">Data Search and Discovery</a>
    </li>
    <li>
      <a href="articles/C-retrieval.html">Data Retrieval and Reuse</a>
    </li>
    <li>
      <a href="articles/D-archiving.html">Data Archiving</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/iqss/dataverse-client-r/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="r-client-for-dataverse-repositories" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#r-client-for-dataverse-repositories" class="anchor"></a>R Client for Dataverse Repositories</h1></div>

<p><a href="https://dataverse.org"><img src="https://dataverse.org/files/dataverseorg/files/dataverse_project_logo-hp.png" alt="Dataverse Project logo"></a></p>
<p>The <strong>dataverse</strong> package provides access to <a href="https://dataverse.org/">Dataverse</a> APIs (versions 4+), enabling data search, retrieval, and deposit, thus allowing R users to integrate public data sharing into the reproducible research workflow. <strong>dataverse</strong> is the next-generation iteration of <a href="https://cran.r-project.org/package=dvn">the <strong>dvn</strong> package</a>, which works with Dataverse 3 (“Dataverse Network”) applications. <strong>dataverse</strong> includes numerous improvements for data search, retrieval, and deposit, including use of the (currently in development) <strong>sword</strong> package for data deposit and the <strong>UNF</strong> package for data fingerprinting.</p>
<div id="getting-started" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h3>
<p>You can find a stable release on <a href="https://cran.r-project.org/package=dataverse">CRAN</a>, or install the latest development version from <a href="https://github.com/iqss/dataverse-client-r/">GitHub</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install from CRAN</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dataverse"</span><span class="op">)</span>

<span class="co"># Install from GitHub</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"iqss/dataverse-client-r"</span><span class="op">)</span></code></pre></div>
<div id="keys" class="section level4">
<h4 class="hasAnchor">
<a href="#keys" class="anchor"></a>Keys</h4>
<p>Some features of the Dataverse API are public and require no authentication. This means in many cases you can search for and retrieve data without a Dataverse account for that a specific Dataverse installation. But, other features require a Dataverse account for the specific server installation of the Dataverse software, and an API key linked to that account. Instructions for obtaining an account and setting up an API key are available in the <a href="https://guides.dataverse.org/en/latest/user/account.html">Dataverse User Guide</a>. (Note: if your key is compromised, it can be regenerated to preserve security.) Once you have an API key, this should be stored as an environment variable called <code>DATAVERSE_KEY</code>. It can be set within R using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_KEY"</span> <span class="op">=</span> <span class="st">"examplekey12345"</span><span class="op">)</span></code></pre></div>
</div>
<div id="server" class="section level4">
<h4 class="hasAnchor">
<a href="#server" class="anchor"></a>Server</h4>
<p>Because <a href="https://dataverse.org/">there are many Dataverse installations</a>, all functions in the R client require specifying what server installation you are interacting with. This can be set by default with an environment variable, <code>DATAVERSE_SERVER</code>. This should be the Dataverse server, without the “https” prefix or the “/api” URL path, etc. For example, the Harvard Dataverse can be used by setting:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span><span class="st">"DATAVERSE_SERVER"</span> <span class="op">=</span> <span class="st">"dataverse.harvard.edu"</span><span class="op">)</span></code></pre></div>
<p>Note: The package attempts to compensate for any malformed values, though.</p>
<p>Currently, the package wraps the data management features of the Dataverse API. Functions for other API features - related to user management and permissions - are not currently exported in the package (but are drafted in the <a href="https://github.com/IQSS/dataverse-client-r">source code</a>).</p>
</div>
</div>
<div id="data-and-metadata-retrieval" class="section level3">
<h3 class="hasAnchor">
<a href="#data-and-metadata-retrieval" class="anchor"></a>Data and Metadata Retrieval</h3>
<p>The dataverse package provides multiple interfaces to obtain data into R. Users can supply a file DOI, a dataset DOI combined with a filename, or a dataverse object. They can read in the file as a raw binary or a dataset read in with the appropriate R function.</p>
<div id="reading-data-as-r-objects" class="section level4">
<h4 class="hasAnchor">
<a href="#reading-data-as-r-objects" class="anchor"></a>Reading data as R objects</h4>
<p>Use the <code>get_dataframe_*()</code> functions, depending on the input you have. For example, we will read a survey dataset on Dataverse, <a href="https://demo.dataverse.org/dataset.xhtml?persistentId=doi:10.70122/FK2/PPIAXE">nlsw88.dta</a> (<code>doi:10.70122/FK2/PPKHI1/ZYATZZ</code>), originally in Stata dta form.</p>
<p>With a file DOI, we can use the <code>get_dataframe_by_doi</code> function:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nlsw</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/get_dataframe_by_name.html">get_dataframe_by_doi</a></span><span class="op">(</span>
    filedoi     <span class="op">=</span> <span class="st">"10.70122/FK2/PPIAXE/MHDB0O"</span>,
    server      <span class="op">=</span> <span class="st">"demo.dataverse.org"</span>
  <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Downloading ingested version of data with readr::read_tsv. To download the original version and remove this message, set original = TRUE.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="do">## cols(</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   idcode = col_double(),</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   age = col_double(),</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   race = col_double(),</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   married = col_double(),</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   never_married = col_double(),</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   grade = col_double(),</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   collgrad = col_double(),</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   south = col_double(),</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="do">##   smsa = col_double(),</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="do">##   c_city = col_double(),</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="do">##   industry = col_double(),</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="do">##   occupation = col_double(),</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="do">##   union = col_double(),</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="do">##   wage = col_double(),</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="do">##   hours = col_double(),</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="do">##   ttl_exp = col_double(),</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="do">##   tenure = col_double()</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="do">## )</span></span></code></pre></div>
<p>which by default reads in the ingested file (not the original dta) by the <a href="https://readr.tidyverse.org/reference/read_delim.html"><code>readr::read_tsv</code></a> function.</p>
<p>Alternatively, we can download the same file by specifying the filename and the DOI of the “dataset” (in Dataverse, a collection of files is called a dataset).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nlsw_tsv</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/get_dataframe_by_name.html">get_dataframe_by_name</a></span><span class="op">(</span>
    filename  <span class="op">=</span> <span class="st">"nlsw88.tab"</span>,
    dataset   <span class="op">=</span> <span class="st">"10.70122/FK2/PPIAXE"</span>,
    server    <span class="op">=</span> <span class="st">"demo.dataverse.org"</span>
  <span class="op">)</span></code></pre></div>
<p>Now, Dataverse often translates rectangular data into an ingested, or “archival” version, which is application-neutral and easily-readable. <code>read_dataframe_*()</code> defaults to taking this ingested version rather than using the original, through the argument <code>original = FALSE</code>.</p>
<p>This default is safe because you may not have the proprietary software that was originally used. On the other hand, the data may have lost information in the process of the ingestation.</p>
<p>Instead, to read the same file but its original version, specify <code>original = TRUE</code> and set an <code>.f</code> argument. In this case, we know that <code>nlsw88.tab</code> is a Stata <code>.dta</code> dataset, so we will use the <code><a href="https://haven.tidyverse.org/reference/read_dta.html">haven::read_dta</a></code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nlsw_original</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/get_dataframe_by_name.html">get_dataframe_by_name</a></span><span class="op">(</span>
    filename    <span class="op">=</span> <span class="st">"nlsw88.tab"</span>,
    dataset     <span class="op">=</span> <span class="st">"10.70122/FK2/PPIAXE"</span>,
    .f          <span class="op">=</span> <span class="fu">haven</span><span class="fu">::</span><span class="va"><a href="https://haven.tidyverse.org/reference/read_dta.html">read_dta</a></span>,
    original    <span class="op">=</span> <span class="cn">TRUE</span>,
    server      <span class="op">=</span> <span class="st">"demo.dataverse.org"</span>
  <span class="op">)</span></code></pre></div>
<p>Note that even though the file prefix is “.tab”, we use <code><a href="https://haven.tidyverse.org/reference/read_dta.html">haven::read_dta</a></code>.</p>
<p>Of course, when the dataset is not ingested (such as a Rds file), users would always need to specify an <code>.f</code> argument for the specific file.</p>
<p>Note the difference between <code>nls_tsv</code> and <code>nls_original</code>. <code>nls_original</code> preserves the data attributes like value labels, whereas <code>nls_tsv</code> has dropped this or left this in file metadata.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">nlsw_tsv</span><span class="op">$</span><span class="va">race</span><span class="op">)</span> <span class="co"># tab ingested version only has numeric data</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">nlsw_original</span><span class="op">$</span><span class="va">race</span>, <span class="st">"labels"</span><span class="op">)</span> <span class="co"># original dta has value labels</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## white black other </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">##     1     2     3</span></span></code></pre></div>
</div>
<div id="reading-a-dataset-as-a-binary-file" class="section level4">
<h4 class="hasAnchor">
<a href="#reading-a-dataset-as-a-binary-file" class="anchor"></a>Reading a dataset as a binary file.</h4>
<p>In some cases, you may not want to read in the data in your environment, perhaps because that is not possible (e.g. for a <code>.docx</code> file), and you want to simply write these files your local disk. To do this, use the more primitive <code>get_file_*</code> commands. The arguments are equivalent, except we no longer need an <code>.f</code> argument</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nlsw_raw</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/get_file.html">get_file_by_name</a></span><span class="op">(</span>
    filename    <span class="op">=</span> <span class="st">"nlsw88.tab"</span>,
    dataset     <span class="op">=</span> <span class="st">"10.70122/FK2/PPIAXE"</span>,
    server      <span class="op">=</span> <span class="st">"demo.dataverse.org"</span>
  <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">nlsw_raw</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "raw"</span></span></code></pre></div>
</div>
<div id="reading-file-metadata" class="section level4">
<h4 class="hasAnchor">
<a href="#reading-file-metadata" class="anchor"></a>Reading file metadata</h4>
<p>The function <code><a href="reference/get_file_metadata.html">get_file_metadata()</a></code> can also be used similarly. This will return a metadata format for ingested tabular files in the <code>ddi</code> format. The function <code><a href="reference/get_dataset.html">get_dataset()</a></code> will retrieve the list of files in a dataset.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/get_dataset.html">get_dataset</a></span><span class="op">(</span>
  dataset <span class="op">=</span> <span class="st">"10.70122/FK2/PPIAXE"</span>,
  server  <span class="op">=</span> <span class="st">"demo.dataverse.org"</span>
<span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Dataset (182162): </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Version: 1.1, RELEASED</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Release Date: 2020-12-30T00:00:24Z</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="do">## License: CC0</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 22 Files:</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="do">##                   label version      id               contentType</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 nlsw88_rds-export.rds       1 1734016  application/octet-stream</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2            nlsw88.tab       3 1734017 text/tab-separated-values</span></span></code></pre></div>
</div>
</div>
<div id="data-discovery" class="section level3">
<h3 class="hasAnchor">
<a href="#data-discovery" class="anchor"></a>Data Discovery</h3>
<p>Dataverse supplies a robust search API to discover Dataverses, datasets, and files. The simplest searches simply consist of a query string:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dataverse_search.html">dataverse_search</a></span><span class="op">(</span><span class="st">"Gary King"</span><span class="op">)</span></code></pre></div>
<p>More complicated searches might specify metadata fields:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dataverse_search.html">dataverse_search</a></span><span class="op">(</span>author <span class="op">=</span> <span class="st">"Gary King"</span>, title <span class="op">=</span> <span class="st">"Ecological Inference"</span><span class="op">)</span></code></pre></div>
<p>And searches can be restricted to specific types of objects (Dataverse, dataset, or file):</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dataverse_search.html">dataverse_search</a></span><span class="op">(</span>author <span class="op">=</span> <span class="st">"Gary King"</span>, type <span class="op">=</span> <span class="st">"dataset"</span><span class="op">)</span></code></pre></div>
<p>The results are paginated using <code>per_page</code> argument. To retrieve subsequent pages, specify <code>start</code>.</p>
</div>
<div id="data-archiving" class="section level3">
<h3 class="hasAnchor">
<a href="#data-archiving" class="anchor"></a>Data Archiving</h3>
<p>Dataverse provides two - basically unrelated - workflows for managing (adding, documenting, and publishing) datasets. The first is built on <a href="http://swordapp.org/sword-v2/">SWORD v2.0</a>. This means that to create a new dataset listing, you will have to first initialize a dataset entry with some metadata, add one or more files to the dataset, and then publish it. This looks something like the following:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># retrieve your service document</span>
<span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/service_document.html">service_document</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># create a list of metadata</span>
<span class="va">metadat</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    title       <span class="op">=</span> <span class="st">"My Study"</span>,
    creator     <span class="op">=</span> <span class="st">"Doe, John"</span>,
    description <span class="op">=</span> <span class="st">"An example study"</span>
  <span class="op">)</span>

<span class="co"># create the dataset</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/initiate_sword_dataset.html">initiate_sword_dataset</a></span><span class="op">(</span><span class="st">"mydataverse"</span>, body <span class="op">=</span> <span class="va">metadat</span><span class="op">)</span>

<span class="co"># add files to dataset</span>
<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">iris</span>, file <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span>
<span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_file.html">add_file</a></span><span class="op">(</span><span class="va">ds</span>, file <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span>

<span class="co"># publish new dataset</span>
<span class="fu"><a href="reference/publish_sword_dataset.html">publish_sword_dataset</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span>

<span class="co"># dataset will now be published</span>
<span class="fu"><a href="reference/list_datasets.html">list_datasets</a></span><span class="op">(</span><span class="st">"mydataverse"</span><span class="op">)</span></code></pre></div>
<p>The second workflow is called the “native” API and is similar but uses slightly different functions:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create the dataset</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_dataset.html">create_dataset</a></span><span class="op">(</span><span class="st">"mydataverse"</span><span class="op">)</span>

<span class="co"># add files</span>
<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">iris</span>, file <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span>
<span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_dataset_file.html">add_dataset_file</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">tmp</span>, dataset <span class="op">=</span> <span class="va">ds</span><span class="op">)</span>

<span class="co"># publish dataset</span>
<span class="fu"><a href="reference/publish_dataset.html">publish_dataset</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span>

<span class="co"># dataset will now be published</span>
<span class="fu"><a href="reference/get_dataverse.html">get_dataverse</a></span><span class="op">(</span><span class="st">"mydataverse"</span><span class="op">)</span></code></pre></div>
<p>Through the native API it is possible to update a dataset by modifying its metadata with <code><a href="reference/create_dataset.html">update_dataset()</a></code> or file contents using <code><a href="reference/add_dataset_file.html">update_dataset_file()</a></code> and then republish a new version using <code><a href="reference/publish_dataset.html">publish_dataset()</a></code>.</p>
</div>
<div id="other-installations" class="section level3">
<h3 class="hasAnchor">
<a href="#other-installations" class="anchor"></a>Other Installations</h3>
<p>Users interested in downloading metadata from archives other than Dataverse may be interested in Kurt Hornik’s <a href="https://cran.r-project.org/package=OAIHarvester">OAIHarvester</a> and Scott Chamberlain’s <a href="https://cran.r-project.org/package=oai">oai</a>, which offer metadata download from any web repository that is compliant with the <a href="http://www.openarchives.org/">Open Archives Initiative</a> standards. Additionally, <a href="https://cran.r-project.org/package=rdryad">rdryad</a> uses OAIHarvester to interface with <a href="https://datadryad.org/stash">Dryad</a>. The <a href="https://cran.r-project.org/package=rfigshare">rfigshare</a> package works in a similar spirit to <strong>dataverse</strong> with <a href="https://figshare.com/" class="uri">https://figshare.com/</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=dataverse">https://​cloud.r-project.org/​package=dataverse</a>
</li>
<li>Browse source code at <br><a href="https://github.com/iqss/dataverse-client-r/">https://​github.com/​iqss/​dataverse-client-r/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/iqss/dataverse-client-r/issues">https://​github.com/​iqss/​dataverse-client-r/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing dataverse</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Will Beasley <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-5613-5006" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Thomas J. Leeper <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-4097-6326" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Shiro Kuriwaki <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-5687-2647" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Philip Durbin <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9528-9470" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Sebastian Karcher <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-8249-7388" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=dataverse"><img src="https://www.r-pkg.org/badges/version/dataverse" alt="CRAN Version"></a></li>
<li><a href="https://travis-ci.org/IQSS/dataverse-client-r"><img src="https://travis-ci.org/IQSS/dataverse-client-r.png?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/github/IQSS/dataverse-client-r?branch=master"><img src="https://codecov.io/github/IQSS/dataverse-client-r/coverage.svg?branch=master" alt="codecov.io"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Will Beasley, Thomas J. Leeper, Shiro Kuriwaki, Philip Durbin, Sebastian Karcher.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
